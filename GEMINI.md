# OpenFinCh (Open Financial Charts)

OpenFinCh is a locally-hosted, interactive stock charting application. It provides a privacy-focused alternative to cloud-based charting platforms by running entirely on the user's machine, fetching data directly via `yfinance`, and rendering charts with TradingView's Lightweight Charts library.

## Project Overview

*   **Type:** Python Local Web Application
*   **Core Technologies:**
    *   **Backend:** Python 3 (`http.server`, `yfinance`, `pandas`)
    *   **Frontend:** HTML/CSS/JavaScript (Lightweight Charts)
    *   **Data Source:** Yahoo Finance (via `yfinance`)
*   **Architecture:**
    *   **Server:** A custom `http.server` (`openfinch/server.py`) serves the frontend and exposes a JSON API.
    *   **Data Processing:** `openfinch/intervals/` handles data fetching and resampling (e.g., converting 1-minute data to custom timeframes).
    *   **Frontend Generation:** `openfinch/stock_chart.py` dynamically generates the HTML/JS for the client.
    *   **Indicators:** Technical indicators (SMA, EMA, etc.) are calculated client-side in JavaScript.

## Building and Running

### Prerequisites

*   Python 3.8+
*   `pip install -r requirements.txt`

### Key Commands

*   **Run Application:**
    ```bash
    python -m openfinch
    ```
    This starts the server at `http://127.0.0.1:8765` and automatically opens the default browser.

## Key Files & Directories

*   `openfinch/`
    *   `__main__.py`: Entry point for the application.
    *   `server.py`: The HTTP server implementation. Handles API routes (`/api/data`, `/api/news`, etc.) and serves the chart.
    *   `stock_chart.py`: Generates the single-page application's HTML, CSS, and JavaScript.
    *   `intervals/__init__.py`: Logic for fetching, caching, and resampling stock data from `yfinance`.
    *   `edgar.py`: Fetches shareholder/insider data (likely from SEC EDGAR or similar sources).
*   `indicators/`: Documentation and potential future Python implementations of indicators (currently handled in JS).
*   `requirements.txt`: Python dependencies (`yfinance`, `pandas`).

## Development Conventions

*   **Zero-Dependency Server:** The project avoids heavy web frameworks (Flask, Django) in favor of the standard library's `http.server` to maintain a lightweight footprint.
*   **Frontend Injection:** The frontend is not a static file; it is constructed as a Python string in `stock_chart.py` to allow dynamic injection of initial state.
*   **Type Hinting:** Python code utilizes type hints for function arguments and return values.
*   **Pandas Resampling:** Custom time intervals are generated by fetching high-resolution data (e.g., 1m, 1h) and using pandas `resample()` to create the target interval.
